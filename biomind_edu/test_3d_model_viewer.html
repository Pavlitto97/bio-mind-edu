<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BioMind EDU - Cell Model Test</title>
    
    <!-- Model Viewer component from Google -->
    <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.3.0/model-viewer.min.js"></script>
    
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }
        
        .container {
            width: 90%;
            max-width: 800px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #2ecc71 0%, #27ae60 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            margin: 0;
            font-size: 2.5em;
            font-weight: bold;
        }
        
        .header p {
            margin: 10px 0 0 0;
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        model-viewer {
            width: 100%;
            height: 600px;
            background-color: #1A1A1A;
        }
        
        .controls {
            background: #f8f9fa;
            padding: 20px;
            text-align: center;
        }
        
        .info {
            background: #fff;
            padding: 30px;
            text-align: left;
        }
        
        .info h2 {
            color: #2ecc71;
            margin-top: 0;
        }
        
        .info ul {
            list-style: none;
            padding: 0;
        }
        
        .info li {
            padding: 10px 0;
            border-bottom: 1px solid #eee;
        }
        
        .info li:last-child {
            border-bottom: none;
        }
        
        .icon {
            margin-right: 10px;
        }
        
        .badge {
            display: inline-block;
            background: #2ecc71;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9em;
            margin-top: 10px;
        }
        
        .warning {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin: 20px 0;
            border-radius: 4px;
        }
        
        .success {
            background: #d4edda;
            border-left: 4px solid #28a745;
            padding: 15px;
            margin: 20px 0;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üß¨ BioMind EDU</h1>
            <p>–¢–µ—Å—Ç 3D –º–æ–¥–µ–ª–∏ –∫–ª–µ—Ç–∫–∏</p>
            <span class="badge">cell_model.glb –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è</span>
        </div>
        
        <!-- 3D Model Viewer -->
        <model-viewer
            src="assets/3d_models/cell_model.glb"
            alt="3D –º–æ–¥–µ–ª—å –∫–ª–µ—Ç–∫–∏ –¥–ª—è –¥–µ—Ç–µ–π 3-8 –ª–µ—Ç"
            auto-rotate
            camera-controls
            touch-action="pan-y"
            loading="eager"
            camera-orbit="auto auto auto"
            field-of-view="45deg"
            min-camera-orbit="auto auto 5%"
            max-camera-orbit="auto auto 100%"
            shadow-intensity="1"
            exposure="1"
            environment-image="neutral">
            
            <!-- Progress bar during loading -->
            <div slot="progress-bar" style="
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: rgba(255, 255, 255, 0.9);
                padding: 20px 40px;
                border-radius: 10px;
                text-align: center;
            ">
                <div style="font-size: 1.2em; color: #2ecc71; margin-bottom: 10px;">
                    ‚è≥ –ó–∞–≥—Ä—É–∑–∫–∞ 3D –º–æ–¥–µ–ª–∏...
                </div>
                <div style="font-size: 0.9em; color: #666;">
                    –ü–æ–∂–∞–ª—É–π—Å—Ç–∞ –ø–æ–¥–æ–∂–¥–∏—Ç–µ
                </div>
            </div>
        </model-viewer>
        
        <div class="controls">
            <h3 style="margin-top: 0;">üéÆ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:</h3>
            <p>üñ±Ô∏è <strong>–õ–µ–≤–∞—è –∫–Ω–æ–ø–∫–∞ –º—ã—à–∏</strong> - –≤—Ä–∞—â–∞—Ç—å –º–æ–¥–µ–ª—å</p>
            <p>üñ±Ô∏è <strong>–ü—Ä–∞–≤–∞—è –∫–Ω–æ–ø–∫–∞ –º—ã—à–∏</strong> - –ø–µ—Ä–µ–º–µ—â–∞—Ç—å –∫–∞–º–µ—Ä—É</p>
            <p>üñ±Ô∏è <strong>–ö–æ–ª–µ—Å–æ –ø—Ä–æ–∫—Ä—É—Ç–∫–∏</strong> - –ø—Ä–∏–±–ª–∏–∂–∞—Ç—å/–æ—Ç–¥–∞–ª—è—Ç—å</p>
            <p>üì± <strong>–ù–∞ —Ç–∞—á-—É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö</strong> - —Å–≤–∞–π–ø –¥–ª—è –≤—Ä–∞—â–µ–Ω–∏—è, –ø–∏–Ω—á –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è</p>
        </div>
        
        <div class="info">
            <div class="success">
                <strong>‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞!</strong><br>
                ModelViewer –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ ARViewWidget (ar_view_widget.dart)
            </div>
            
            <h2>üìä –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –º–æ–¥–µ–ª–∏</h2>
            <ul>
                <li><span class="icon">üìÅ</span><strong>–§–∞–π–ª:</strong> assets/3d_models/cell_model.glb</li>
                <li><span class="icon">üíæ</span><strong>–†–∞–∑–º–µ—Ä:</strong> 22 MB (—Ç—Ä–µ–±—É–µ—Ç –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –¥–æ <5 MB)</li>
                <li><span class="icon">üé®</span><strong>–§–æ—Ä–º–∞—Ç:</strong> GLB (Binary glTF)</li>
                <li><span class="icon">üîß</span><strong>–°–æ–∑–¥–∞–Ω–æ –≤:</strong> Tripo AI</li>
                <li><span class="icon">‚ú®</span><strong>–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:</strong> Auto-rotate, Camera controls, Touch interaction</li>
            </ul>
            
            <div class="warning">
                <strong>‚ö†Ô∏è –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ:</strong><br>
                –ú–æ–¥–µ–ª—å –≤–µ—Å–∏—Ç 22 MB, —á—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –¥–æ–ª–≥–æ–π –∑–∞–≥—Ä—É–∑–∫–µ (5-15 —Å–µ–∫—É–Ω–¥).
                –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –¥–æ &lt;5 MB –∏—Å–ø–æ–ª—å–∑—É—è Blender –∏–ª–∏ –æ–Ω–ª–∞–π–Ω-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã.
            </div>
            
            <h2>üéØ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏</h2>
            <p>–í BioMindEDU –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏, –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:</p>
            <ol>
                <li>–û—Ç–∫—Ä—ã–≤–∞–µ—Ç —É—Ä–æ–∫ "–ö–ª–µ—Ç–∫–∞" (—Å–∏–Ω—è—è –∫–∞—Ä—Ç–æ—á–∫–∞ CELL)</li>
                <li>–ù–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É "Start AR Experience"</li>
                <li>–ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è <code>ARViewWidget</code> —Å —ç—Ç–æ–π 3D –º–æ–¥–µ–ª—å—é</li>
                <li>–ú–æ–¥–µ–ª—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—Ä–∞—â–∞–µ—Ç—Å—è –∏ —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ touch/mouse</li>
                <li>–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ–¥—Å–∫–∞–∑–∫–∞ "Swipe to rotate" –≤–Ω–∏–∑—É —ç–∫—Ä–∞–Ω–∞</li>
            </ol>
            
            <h2>üíª –ö–æ–¥ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏</h2>
            <pre style="background: #f4f4f4; padding: 15px; border-radius: 5px; overflow-x: auto;">
<code>// lib/features/ar_lesson/widgets/ar_view_widget.dart

import 'package:model_viewer_plus/model_viewer_plus.dart';

Widget _buildFallback3DView() {
  final modelPath = '${ModelConstants.modelsPath}${widget.lesson.modelFileName}';
  
  return ModelViewer(
    src: modelPath,  // "assets/3d_models/cell_model.glb"
    alt: '${widget.lesson.titleKey} 3D Model',
    ar: false,
    autoRotate: true,
    cameraControls: true,
    backgroundColor: const Color(0xFF1A1A1A),
    loading: Loading.eager,
    cameraOrbit: 'auto auto auto',
    fieldOfView: '45deg',
  );
}</code>
            </pre>
            
            <h2>üì± –ü–ª–∞—Ç—Ñ–æ—Ä–º—ã</h2>
            <ul>
                <li><span class="icon">üåê</span><strong>Web:</strong> –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ (–ª—É—á—à–∏–π –æ–ø—ã—Ç)</li>
                <li><span class="icon">üì±</span><strong>iOS/Android:</strong> –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ + AR —Ä–µ–∂–∏–º</li>
                <li><span class="icon">üíª</span><strong>macOS/Windows:</strong> –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞</li>
            </ul>
            
            <h2>üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏</h2>
            <ul>
                <li>‚è≥ –°–æ–∑–¥–∞—Ç—å plant_model.glb —á–µ—Ä–µ–∑ Tripo AI</li>
                <li>‚è≥ –°–æ–∑–¥–∞—Ç—å heart_model.glb —á–µ—Ä–µ–∑ Tripo AI</li>
                <li>‚è≥ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–∑–º–µ—Ä cell_model.glb (22 MB ‚Üí &lt;5 MB)</li>
                <li>‚è≥ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö</li>
                <li>‚è≥ –î–æ–±–∞–≤–∏—Ç—å AR —Ä–µ–∂–∏–º –¥–ª—è iOS/Android</li>
            </ul>
        </div>
    </div>
    
    <script>
        // Wait for model to load
        const modelViewer = document.querySelector('model-viewer');
        
        modelViewer.addEventListener('load', () => {
            console.log('‚úÖ 3D –º–æ–¥–µ–ª—å –∑–∞–≥—Ä—É–∂–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ!');
            console.log('–†–∞–∑–º–µ—Ä –º–æ–¥–µ–ª–∏:', modelViewer.getBoundingBoxCenter());
        });
        
        modelViewer.addEventListener('error', (event) => {
            console.error('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥–µ–ª–∏:', event);
            alert('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å 3D –º–æ–¥–µ–ª—å. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Ñ–∞–π–ª cell_model.glb –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ assets/3d_models/');
        });
        
        modelViewer.addEventListener('progress', (event) => {
            const progress = event.detail.totalProgress * 100;
            console.log(`–ó–∞–≥—Ä—É–∑–∫–∞: ${progress.toFixed(1)}%`);
        });
    </script>
</body>
</html>
