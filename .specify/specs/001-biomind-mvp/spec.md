# Feature Specification: BioMindEDU MVP

**Feature Branch**: `001-biomind-mvp`  
**Created**: 2025-10-19  
**Status**: Draft  
**Input**: Создать AR-приложение для обучения биологии детей 3-8 лет с использованием Flutter + ARCore/ARKit

## User Scenarios & Testing *(mandatory)*

### User Story 1 - Просмотр AR-модели клетки (Priority: P1)

Ребенок может открыть приложение, выбрать урок "Клетка" и увидеть 3D-модель клетки в дополненной реальности, которую можно вращать и увеличивать.

**Why this priority**: Это основная ценностная функция приложения - визуализация биологических концепций через AR. Без этого приложение теряет свою уникальность.

**Independent Test**: Можно полностью протестировать открыв приложение, выбрав урок и разместив AR-модель в пространстве. Измеряется успешностью рендеринга 3D-модели и возможностью взаимодействия.

**Acceptance Scenarios**:

1. **Given** пользователь открыл приложение, **When** выбирает урок "Клетка", **Then** видит инструкцию по размещению AR-объекта
2. **Given** камера активна, **When** пользователь наводит на плоскую поверхность, **Then** появляется индикатор возможности размещения
3. **Given** AR-модель размещена, **When** пользователь делает жест пинч/зум, **Then** модель увеличивается/уменьшается
4. **Given** AR-модель отображается, **When** пользователь касается частей клетки, **Then** появляются подписи с названиями органелл

---

### User Story 2 - Прохождение интерактивного задания (Priority: P1)

После просмотра AR-модели ребенок может выполнить интерактивное задание "Собери клетку", перетаскивая органеллы на правильные места.

**Why this priority**: Закрепление знаний через игровую механику - ключевой элемент обучения для возраста 3-8 лет. Это превращает просмотр в активное обучение.

**Independent Test**: После просмотра AR-сцены запускается мини-игра, где нужно правильно расположить 5-7 органелл. Измеряется завершением задания и количеством правильных ответов.

**Acceptance Scenarios**:

1. **Given** пользователь завершил просмотр AR-модели, **When** нажимает "Выполнить задание", **Then** открывается игровой экран с контуром клетки
2. **Given** игра началась, **When** пользователь перетаскивает органеллу на правильное место, **Then** она фиксируется с анимацией и звуком успеха
3. **Given** органелла перемещена неправильно, **When** отпускает палец, **Then** органелла возвращается с подсказкой
4. **Given** все органеллы размещены правильно, **When** проверка завершена, **Then** показывается экран поздравления с наградой

---

### User Story 3 - Голосовое сопровождение урока (Priority: P1)

Во время просмотра AR-модели ребенок слышит простые объяснения на родном языке о том, что он видит.

**Why this priority**: Дети 3-8 лет часто не умеют читать или читают плохо. Голосовое сопровождение делает приложение доступным для всей целевой аудитории.

**Independent Test**: При запуске урока автоматически начинается воспроизведение аудио-объяснений. Можно измерить через успешное воспроизведение аудио и синхронизацию с визуальными подсказками.

**Acceptance Scenarios**:

1. **Given** урок начался, **When** AR-модель загружается, **Then** начинается воспроизведение приветственного аудио
2. **Given** аудио воспроизводится, **When** пользователь касается элемента модели, **Then** воспроизводится объяснение этого элемента
3. **Given** воспроизводится аудио, **When** пользователь нажимает паузу, **Then** аудио останавливается с возможностью продолжения
4. **Given** выбран другой язык, **When** урок запускается, **Then** аудио воспроизводится на выбранном языке

---

### User Story 4 - Мини-тест после урока (Priority: P2)

После завершения интерактивного задания ребенок проходит простой тест из 5-7 вопросов с картинками для оценки усвоения материала.

**Why this priority**: Позволяет оценить прогресс и дает родителям/педагогам данные об эффективности обучения. Важно, но можно добавить после основных AR функций.

**Independent Test**: После завершения задания автоматически открывается тест. Измеряется процентом правильных ответов и временем прохождения.

**Acceptance Scenarios**:

1. **Given** интерактивное задание завершено, **When** пользователь нажимает "Продолжить", **Then** открывается экран теста
2. **Given** вопрос отображается, **When** пользователь выбирает вариант ответа, **Then** показывается правильный/неправильный ответ с анимацией
3. **Given** все вопросы отвечены, **When** тест завершен, **Then** показывается результат с количеством правильных ответов
4. **Given** тест завершен с результатом >80%, **When** показывается экран результатов, **Then** пользователь получает виртуальный стикер/награду

---

### User Story 5 - Базовый отчет о прогрессе (Priority: P2)

Родитель может открыть раздел "Прогресс" и увидеть какие уроки завершил ребенок, результаты тестов и полученные награды.

**Why this priority**: Дает родителям visibility в обучение ребенка, но не критично для MVP - можно добавить после основного функционала.

**Independent Test**: В главном меню есть раздел "Прогресс", где отображается список пройденных уроков и статистика. Измеряется корректностью отображения данных.

**Acceptance Scenarios**:

1. **Given** пользователь в главном меню, **When** нажимает "Прогресс", **Then** открывается экран со списком доступных уроков и статусом прохождения
2. **Given** урок завершен, **When** просматривается в списке, **Then** показывается дата прохождения и результат теста
3. **Given** получены награды, **When** открыт раздел наград, **Then** отображаются все полученные стикеры/значки
4. **Given** данные синхронизированы с Firebase, **When** открыт с другого устройства, **Then** прогресс отображается корректно

---

### Edge Cases

- Что происходит когда устройство не поддерживает ARCore/ARKit? → Показывать 3D-модель без AR, с возможностью вращения пальцами
- Как система обрабатывает недостаточное освещение для AR? → Показывать подсказку об улучшении освещения и предлагать fallback в режим просмотра 3D
- Что если ребенок не завершил урок? → Сохранять прогресс и предлагать продолжить с места остановки
- Как обрабатывать отсутствие интернета? → Основные уроки работают оффлайн, синхронизация с Firebase происходит при подключении
- Что если родители хотят ограничить время использования? → Добавить опциональный таймер в родительских настройках

## Requirements *(mandatory)*

### Functional Requirements

- **FR-001**: Приложение ДОЛЖНО поддерживать AR режим на Android (ARCore) и iOS (ARKit)
- **FR-002**: Приложение ДОЛЖНО иметь fallback режим просмотра 3D-моделей без AR для неподдерживаемых устройств
- **FR-003**: Приложение ДОЛЖНО включать минимум 3 AR-сцены (клетка, растение, сердце)
- **FR-004**: Каждая AR-сцена ДОЛЖНА включать:
  - Интерактивную 3D-модель с аннотациями
  - Голосовое объяснение
  - Одно интерактивное задание
  - Мини-тест (5-7 вопросов)
- **FR-005**: Приложение ДОЛЖНО воспроизводить аудио файлы для голосового сопровождения
- **FR-006**: Пользователи ДОЛЖНЫ иметь возможность взаимодействовать с AR-моделями (вращать, масштабировать, касаться элементов)
- **FR-007**: Приложение ДОЛЖНО сохранять прогресс пользователя локально (Hive/SQLite)
- **FR-008**: Приложение ДОЛЖНО опционально синхронизировать прогресс с Firebase
- **FR-009**: Интерактивные задания ДОЛЖНЫ использовать drag-and-drop механику
- **FR-010**: Приложение ДОЛЖНО отображать простую систему наград (стикеры/значки)
- **FR-011**: Приложение ДОЛЖНО поддерживать минимум 2 языка (английский, украинский)
- **FR-012**: Родительский раздел ДОЛЖЕН показывать базовую статистику прогресса
- **FR-013**: Приложение ДОЛЖНО работать на устройствах со следующими минимальными требованиями:
  - Android 7.0+ (API 24+) с ARCore поддержкой
  - iOS 12.0+ с ARKit поддержкой
  - Минимум 2GB RAM
- **FR-014**: Приложение ДОЛЖНО соответствовать требованиям COPPA (Children's Online Privacy Protection Act)

### Key Entities *(include if feature involves data)*

- **User/Child Profile**: 
  - Имя (опционально)
  - Возраст
  - Выбранный язык
  - Прогресс по урокам
  - Полученные награды
  - Timestamp создания

- **Lesson**: 
  - ID урока
  - Название (мультиязычное)
  - Описание
  - AR модель (путь к 3D файлу)
  - Аудио файлы (по языкам)
  - Связанное интерактивное задание
  - Связанный тест
  - Сложность (3-5 лет, 6-8 лет)

- **Interactive Task**:
  - ID задания
  - Тип (drag-and-drop, tap-select, etc.)
  - Список элементов для взаимодействия
  - Правильные ответы
  - Подсказки
  - Награда за выполнение

- **Assessment Test**:
  - ID теста
  - Список вопросов (5-7)
  - Варианты ответов (с картинками)
  - Правильные ответы
  - Минимальный процент для "прохождения"

- **Progress Record**:
  - User ID
  - Lesson ID
  - Статус (not started, in progress, completed)
  - Результат теста (процент правильных)
  - Время прохождения
  - Timestamp

- **Reward**:
  - ID награды
  - Название
  - Иконка/изображение
  - Условие получения
  - Статус (locked/unlocked)

## Success Criteria *(mandatory)*

### Measurable Outcomes

- **SC-001**: 90% детей могут успешно разместить AR-модель в пространстве с первой попытки (или в течение 30 секунд)
- **SC-002**: Среднее время прохождения одного урока (AR + задание + тест) составляет 10-15 минут
- **SC-003**: 80% детей завершают интерактивное задание с правильным результатом с первой попытки или со второй
- **SC-004**: Приложение работает стабильно на целевых устройствах со скоростью ≥30 FPS в AR режиме
- **SC-005**: 95% родителей могут легко найти и просмотреть прогресс ребенка в течение 1 минуты
- **SC-006**: Среднее время загрузки AR-сцены не превышает 5 секунд на среднем устройстве
- **SC-007**: Приложение потребляет менее 200MB памяти в активном режиме работы
- **SC-008**: 85% пользователей понимают голосовые инструкции без дополнительной помощи
- **SC-009**: Crash rate < 1% сессий
- **SC-010**: Размер установочного файла MVP < 150MB (без дополнительного контента)
